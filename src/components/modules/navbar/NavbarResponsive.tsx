"use client";

import React, { useEffect } from "react";
import { LuMenu } from "react-icons/lu";
import { useUser } from "@/context/UserContext";
import Link from "next/link";
import { PiUserLight, PiBagLight } from "react-icons/pi";

function NavbarResponsive() {
  const { user, setUser } = useUser();

  useEffect(() => {
    const fetchUser = async () => {
      try {
        const res = await fetch("/api/auth/me");
        const data = await res.json();
        if (data.user) setUser(data.user);
      } catch (err) {
        console.error(err);
      }
    };
    fetchUser();
  }, [setUser]);

  return (
    <div className="block md:hidden px-2 bg-bg h-16 z-[999]">
      <div className="flex items-center justify-between pt-5">
        <LuMenu className="h-6 w-6" />
        {/* <a href="">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 440 116"
            className=" uk-svg"
            width="110"
            height="29"
          >
            <path
              className="woshe"
              d="M46.27,42.7,59.25.65h3.87L46.6,54,31.68,14.93,16.61,54,0,.65H3.79L16.93,42.86,31.68,4.76,46.27,42.7Zm91.16,11a26.66,26.66,0,0,0,23-13.4A26.73,26.73,0,0,0,164,26.88a27,27,0,0,0-3.54-13.48,26.15,26.15,0,0,0-9.68-9.77,26.69,26.69,0,0,0-26.6,0,26.15,26.15,0,0,0-9.68,9.77,27,27,0,0,0-3.54,13.48,26.73,26.73,0,0,0,3.54,13.4,26.66,26.66,0,0,0,23,13.4Zm0-49.89a22.52,22.52,0,0,1,11.45,3.07,23.68,23.68,0,0,1,8.3,8.4,23.11,23.11,0,0,1,3.06,11.62,22.6,22.6,0,0,1-3.06,11.54,22.46,22.46,0,0,1-8.3,8.4,22.45,22.45,0,0,1-22.9,0,22.46,22.46,0,0,1-8.3-8.4,21.92,21.92,0,0,1-3.15-11.54,22.4,22.4,0,0,1,3.15-11.62,23.68,23.68,0,0,1,8.3-8.4,22.52,22.52,0,0,1,11.45-3.07Zm109,23.9a16.31,16.31,0,0,1,5.81,5.08,11.38,11.38,0,0,1,2,6.54A11.54,11.54,0,0,1,252.77,45a13.79,13.79,0,0,1-4.19,4.76,22.2,22.2,0,0,1-13.14,4,23.11,23.11,0,0,1-7.1-1,21.31,21.31,0,0,1-6-3,13.27,13.27,0,0,1-5.56-8.31l3.46-1.94a9.07,9.07,0,0,0,4.36,7.27,15.86,15.86,0,0,0,4.91,2.42,20.71,20.71,0,0,0,6,.88,18,18,0,0,0,10.88-3.3c2.82-2.1,4.27-4.61,4.27-7.43a7.71,7.71,0,0,0-1.53-4.68,13.59,13.59,0,0,0-4.43-3.72c-1.77-.88-4.92-1.61-9.51-2.17-.41-.09-1.7-.25-4-.65A23,23,0,0,1,225,26.31a15.7,15.7,0,0,1-6.21-5.16,11.31,11.31,0,0,1-2.26-6.86,10.8,10.8,0,0,1,1.54-5.65A14.68,14.68,0,0,1,222.3,4a21,21,0,0,1,6-3,22.81,22.81,0,0,1,7.1-1,22.2,22.2,0,0,1,13.14,4,13,13,0,0,1,5.48,8.23l-3.47,1.94a8.34,8.34,0,0,0-1.12-3.88,12.43,12.43,0,0,0-3.15-3.39,16.87,16.87,0,0,0-5-2.5,21.78,21.78,0,0,0-11.77,0,15.18,15.18,0,0,0-5,2.5,12.65,12.65,0,0,0-3.23,3.39,7.91,7.91,0,0,0-1.13,4,8.15,8.15,0,0,0,1.86,4.92,11.75,11.75,0,0,0,4.59,3.87,14,14,0,0,0,3.79,1.14c1.37.24,3.06.56,5.24.8.4.08,1.29.16,2.82.41a35.38,35.38,0,0,1,4.36.88,16.14,16.14,0,0,1,3.54,1.38Zm98.33,25.42h3.63V.65h-3.63V25h-31V.65h-3.71V53.11h3.71V28.74h31V53.11Zm95.27,0V49.32H409.69V28.74h23.62V25H409.69V4.36H440V.65H406.06V53.11Z"
            ></path>
            <path
              className="floral"
              d="M71.74,115.57V103.88H83.12v-1.83H71.74v-10H86.29V90.31H70v25.26Zm176.55-12.24a8.06,8.06,0,0,1,2.77,2.47,5.52,5.52,0,0,1,1,3.13,5.77,5.77,0,0,1-.69,2.74,7,7,0,0,1-2,2.27,10.48,10.48,0,0,1-6.3,2,11.35,11.35,0,0,1-3.41-.51,10,10,0,0,1-2.9-1.44,6.46,6.46,0,0,1-2.67-4l1.66-.93a4.41,4.41,0,0,0,2.09,3.49,7.18,7.18,0,0,0,2.36,1.19,10,10,0,0,0,2.87.41,8.48,8.48,0,0,0,5.22-1.6,4.37,4.37,0,0,0,2.05-3.57,3.81,3.81,0,0,0-.75-2.26,6.27,6.27,0,0,0-2.11-1.79,15,15,0,0,0-4.57-1l-2-.32a10.38,10.38,0,0,1-2.89-.85,7.65,7.65,0,0,1-3-2.47A5.59,5.59,0,0,1,234,96.88a5.35,5.35,0,0,1,.72-2.7,7,7,0,0,1,2-2.24,9.7,9.7,0,0,1,2.9-1.43A11.35,11.35,0,0,1,243,90a10.54,10.54,0,0,1,6.3,1.94,6.33,6.33,0,0,1,2.64,4l-1.67.93a3.9,3.9,0,0,0-.56-1.87,5.67,5.67,0,0,0-1.49-1.63,7.79,7.79,0,0,0-2.4-1.18,9.43,9.43,0,0,0-2.82-.41,9.73,9.73,0,0,0-2.85.41,7.37,7.37,0,0,0-2.38,1.18A5.73,5.73,0,0,0,236.25,95a3.67,3.67,0,0,0-.54,1.89,4,4,0,0,0,.89,2.39,6.26,6.26,0,0,0,2.21,1.85,7,7,0,0,0,1.8.56c.66.11,1.5.24,2.53.37l1.36.19a19.31,19.31,0,0,1,2.09.43,7.36,7.36,0,0,1,1.7.66Zm109,12.51a12.39,12.39,0,0,0,6.38-1.72,13,13,0,0,0,0-22.35,12.65,12.65,0,0,0-12.77,0,13,13,0,0,0,0,22.35,12.4,12.4,0,0,0,6.39,1.72Zm0-24a10.48,10.48,0,0,1,5.49,1.49,11.12,11.12,0,0,1,4,4,11.18,11.18,0,0,1-4,15.2,10.82,10.82,0,0,1-11,0,11.15,11.15,0,0,1-4-4,11.19,11.19,0,0,1,0-11.16,11.3,11.3,0,0,1,4-4,10.54,10.54,0,0,1,5.5-1.49Zm-19,23.74V90.31h-1.74v25.26Zm-20.24,0a12.13,12.13,0,0,0,4.95-1,11.27,11.27,0,0,0,3.95-2.85,12.85,12.85,0,0,0,2.44-4,13.87,13.87,0,0,0,0-9.56,12.4,12.4,0,0,0-2.44-4,11.44,11.44,0,0,0-3.95-2.82,12.29,12.29,0,0,0-4.95-1h-7.24v25.26Zm-5.5-23.47H318a9.91,9.91,0,0,1,7.62,3.22,10.27,10.27,0,0,1,2.07,3.44,12.38,12.38,0,0,1,0,8.32,10.08,10.08,0,0,1-2.07,3.44,9.7,9.7,0,0,1-7.62,3.3h-5.5V92.1Zm-18.42,23.74a9.33,9.33,0,0,0,3.72-.75,9.7,9.7,0,0,0,3.09-2.16,8.75,8.75,0,0,0,2.07-3.11,10,10,0,0,0,.72-3.77V90.31h-1.74v15.74a8.16,8.16,0,0,1-.6,3.11,7.74,7.74,0,0,1-1.68,2.57,8.16,8.16,0,0,1-2.56,1.73,7.8,7.8,0,0,1-6,0,8.11,8.11,0,0,1-2.55-1.73,7.59,7.59,0,0,1-1.68-2.57,8,8,0,0,1-.6-3.11V90.31h-1.75v15.74a10,10,0,0,0,.72,3.77,9,9,0,0,0,2.07,3.11,9.61,9.61,0,0,0,3.12,2.16,9.21,9.21,0,0,0,3.65.75ZM278.86,90.31V92.1h-9.94v23.47h-1.78V92.1h-10V90.31ZM212.8,115.57l-10.45-12.75h3.1a12.29,12.29,0,0,0,4.64-.73,6.33,6.33,0,0,0,2.29-1.89,4.5,4.5,0,0,0,1-2.78,4.63,4.63,0,0,0-.82-2.58,5.87,5.87,0,0,0-2.32-2,7.5,7.5,0,0,0-3.48-.78h-7v23.51h-1.74V90.31h8.79a9.53,9.53,0,0,1,3.32.57,7.93,7.93,0,0,1,2.71,1.61,6.88,6.88,0,0,1,1.72,2.29,6.07,6.07,0,0,1,.61,2.64,6.2,6.2,0,0,1-1.28,3.83,7.35,7.35,0,0,1-3,2.43,8,8,0,0,1-2.34.68,20.61,20.61,0,0,1-2.42.14l9.1,11.07Zm-21.47,0v-1.82H176.77v-9.91h11.34v-1.79H176.77v-10h14.56V90.31H175v25.26Zm-29.84-5,6.23-20.25h1.86L161.64,116l-7.16-18.81L147.24,116l-8-25.69h1.82l6.31,20.33,7.08-18.35,7,18.27Zm-37.42,5.28a12.39,12.39,0,0,0,6.38-1.72,13,13,0,0,0,0-22.35,12.65,12.65,0,0,0-12.77,0,12.71,12.71,0,0,0-4.65,4.7,13,13,0,0,0,4.65,17.65,12.4,12.4,0,0,0,6.39,1.72Zm0-24a10.53,10.53,0,0,1,5.49,1.49,11.12,11.12,0,0,1,4,4,11.18,11.18,0,0,1-4,15.2,10.82,10.82,0,0,1-11,0,11.17,11.17,0,0,1-4-4,11.19,11.19,0,0,1,0-11.16,11.33,11.33,0,0,1,4-4,10.54,10.54,0,0,1,5.5-1.49Zm-15.45,23.74v-1.75H94.5V90.31H92.76v25.26Z"
            ></path>
          </svg>
        </a> */}

        <div className="flex items-center gap-x-3 text-textcolor">
          {/* آیکون کاربر */}

          {user ? (
            <Link href={"login"} className="text-xs ">
              {user.name}
            </Link>
          ) : (
            <Link href={"login"}>
              <PiUserLight className="h-6 w-6" />
            </Link>
          )}

          {/* آیکون سبد خرید */}

          <PiBagLight className="h-6 w-6" />
        </div>
      </div>
    </div>
  );
}

export default NavbarResponsive;
